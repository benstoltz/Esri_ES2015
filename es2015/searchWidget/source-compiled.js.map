{"version":3,"sources":["source.js"],"names":[],"mappings":"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","file":"source-compiled.js","sourcesContent":["import Map from \"esri/map\";\r\nimport Search from \"esri/dijit/Search\";\r\nimport Extent from \"esri/geometry/Extent\";\r\nimport Graphic from \"esri/graphic\";\r\nimport SimpleMarkerSymbol from \"esri/symbols/SimpleMarkerSymbol\";\r\nimport screenUtils from \"esri/geometry/screenUtils\";\r\nimport dom from \"dojo/dom\";\r\nimport domConstruct from \"dojo/dom-construct\";\r\nimport query from \"dojo/query\";\r\nimport Color from \"dojo/_base/Color\";\r\n\r\n\r\nlet map = new Map(\"map\", {\r\n    basemap: \"topo\",\r\n    center: [-117.19, 34.055],\r\n    zoom: 15\r\n});\r\n\r\n\r\nlet search = new Search({\r\n    map\r\n}, dom.byId(\"search\"));\r\n\r\nlet extent = new Extent({\r\n    \"spatialReference\": {\r\n        \"wkid\": 102100\r\n    },\r\n    \"xmin\": -13063280,\r\n    \"xmax\": -13033928,\r\n    \"ymin\": 4028345,\r\n    \"ymax\": 4042715\r\n});\r\n\r\nsearch.sources[0].searchExtent = extent;\r\n\r\nsearch.startup();\r\n\r\n\r\n// Enable spotlight\r\n\r\nmap.on(\"load\", enableSpotlight);\r\nsearch.on(\"select-result\", showLocation);\r\nsearch.on(\"clear-search\", removeSpotlight);\r\n\r\n\r\nfunction showLocation(e) {\r\n    map.graphics.clear();\r\n    let point = e.result.feature.geometry;\r\n    let symbol = new SimpleMarkerSymbol().setStyle(\r\n        SimpleMarkerSymbol.STYLE_SQUARE).setColor(\r\n        new Color([255, 0, 0, 0.5])\r\n    );\r\n    let graphic = new Graphic(point, symbol);\r\n    map.graphics.add(graphic);\r\n\r\n    map.infoWindow.setTitle(\"Search Result\");\r\n    map.infoWindow.setContent(e.result.name);\r\n    map.infoWindow.show(e.result.feature.geometry);\r\n\r\n    let spotlight = map.on(\"extent-change\", function () {\r\n        let geom = screenUtils.toScreenGeometry(map.extent, map.width, map.height, e.result.extent);\r\n        let width = geom.xmax - geom.xmin;\r\n        let height = geom.ymax - geom.ymin;\r\n\r\n        let max = height;\r\n\r\n        if(width > height) {\r\n            max = width;\r\n        }\r\n\r\n        let margin = '-' + Math.floor(max / 2) + 'px 0 0 -' + Math.floor(max / 2) + 'px';\r\n\r\n        query(\".spotlight\").addClass(\"spotlight-active\").style({\r\n            width: max + \"px\",\r\n            height: max + \"px\",\r\n            margin: margin\r\n        });\r\n        spotlight.remove();\r\n    })\r\n}\r\n\r\n\r\n\r\nfunction enableSpotlight() {\r\n    let html = \"<div id='spotlight' class='spotlight'></div>\";\r\n    domConstruct.place(html, dom.byId(\"map_container\"), \"first\");\r\n}\r\n\r\nfunction removeSpotlight() {\r\n    query(\".spotlight\").removeClass(\"spotlight-active\");\r\n    map.infoWindow.hide();\r\n    map.graphics.clear();\r\n}\r\n"]}